#!/usr/bin/env RBuild
{
    "working_folder":"build/",
    "src_folder":"",
    "project_name":"RBuild",
    "project_binary":"RBuild",
    "compiler_all":"gcc",
    "linker":"gcc",
    "targets":{
        "windows_common":{
            "linker_libs":[
                "-lrpcrt4",
            ],
            "include_only":true,
        },
        "linux_common":{
            "linker_libs":[
                "-Wl,--whole-archive",
                "-lpthread",
                "-Wl,--no-whole-archive",
            ],
            "include_only":true,
        },
        "common":{
            "include":[
                {
                    "type":"switch",
                    "condition":"platform",
                    "cases":{
                        "windows":"windows_common",
                        "linux":"linux_common",
                    },
                },
            ],
            "sources":[
                {
                    "name":"src",
                    "type":"exclude",
                    "exclude_list":[
                    ],
                }
            ],
            "flags_c_cpp":[
                "-Iinclude",
                "-Wshadow",
                "-Winit-self",
                "-Wundef",
                "-Wunreachable-code",
                "-Wmissing-declarations",
                "-Wmain",
                "-Wall",
                "-Werror=return-type",
            ],
            "flags_c":[
                "-std=c2x",
            ],
            "flags_cpp":[
                "-std=c++20",
                "-fexceptions",
                "-Wnon-virtual-dtor",
                "-Wpessimizing-move",
                "-Wold-style-cast",
                "-Wredundant-move",
                "-Werror=suggest-override",
            ],
            "include_only":true,
        },
        "release":{
            "include":[
                "common"
            ],
            "defines_c_cpp":[
                "NDEBUG"
            ],
            "flags_c_cpp":[
                "-O2"
            ],
            "linker_flags":[
                "-s"
            ],
        },
        "debug":{
            "include":[
                "common"
            ],
            "defines_c_cpp":[
                "DEBUG"
            ],
            "flags_c_cpp":[
                "-g"
            ],
        },
    },
    "targets_default":"release",
}
